(this["webpackJsonpreach.io"]=this["webpackJsonpreach.io"]||[]).push([[0],{137:function(e,t,n){},161:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(23),o=n.n(a),s=(n(137),n(74),n(224)),i=n(225),l=n(227),u=n(228),d=n(229),j=n(226),f=n(113),p=n.n(f),b=n(30),m=n(3),h=Object(s.a)((function(){return{root:{display:"flex",alignItems:"flex-start",padding:"2vh"},avatar:{padding:"5vh"},username:{padding:"10px",marginLeft:"5vh"},headerArea:{display:"flex",flexDirection:"row",alignItems:"center"},actionArea:{display:"flex",alignItems:"center",flexDirection:"row"},actions:{display:"flex",flexDirection:"column"}}})),x=function(){p.a.get("http://insultgenerator.apiblueprint.org/compliments").then((function(e){console.log(e[0].compliments[0])}))};function O(){var e=h();return Object(m.jsx)("div",{children:Object(m.jsxs)(i.a,{className:e.root,children:[Object(m.jsx)(j.a,{className:e.avatar,image:"/images/profile-pic.png",title:"Live from space album cover"}),Object(m.jsx)("div",{className:"userName",styles:e.username,children:Object(m.jsx)("h1",{children:"Luis"})}),Object(m.jsxs)(l.a,{className:e.actions,children:[Object(m.jsx)(u.a,{size:"medium",variant:"contained",styles:{color:"#6360FF"},onClick:x,children:"Compliment"}),Object(m.jsx)(d.a,{}),Object(m.jsx)(b.b,{to:"/video",children:Object(m.jsx)(u.a,{size:"medium",variant:"contained",styles:{color:"#FF8181"},children:"Call"})})]})]})})}var v=n(233),g=n(237),y=n(39),C=n(230),w=n(231),S=n(118),k=n.n(S),R=n(120),N=n.n(R),D=n(119),I=n.n(D),T=Object(s.a)({root:{width:"100%",position:"fixed",bottom:1,right:1}});function L(e){var t=T(),n=c.a.useState(0),r=Object(y.a)(n,2),a=r[0],o=r[1];return Object(m.jsxs)(C.a,{value:a,onChange:function(e,t){o(t)},showLabels:!0,className:t.root,children:[Object(m.jsx)(w.a,{label:"Home",value:"feed",icon:Object(m.jsx)(k.a,{}),component:b.b,to:"/feed"}),Object(m.jsx)(w.a,{label:"Profile",value:"profile",icon:Object(m.jsx)(I.a,{}),component:b.b,to:"/profile"}),Object(m.jsx)(w.a,{label:"Messages",value:"messages",icon:Object(m.jsx)(N.a,{}),component:b.b,to:"/messages"})]})}var V=n(232),A=n(234),B=Object(s.a)({root:{display:"flex",justifyContent:"center",flexDirection:"row",maxWidth:"500px"}}),P=["\ud83d\ude00","\ud83d\ude42","\ud83d\ude10","\ud83d\ude41","\ud83d\ude25"];function U(e){var t=B();return Object(m.jsx)("div",{children:Object(m.jsx)(i.a,{className:t.root,variant:"outlined",children:Object(m.jsxs)(V.a,{children:[Object(m.jsx)("h3",{children:" How do you feel today?"}),Object(m.jsx)("span",{children:Object(m.jsx)(v.a,{container:!0,direction:"row",alignItems:"center",children:P.map((function(e,t){return Object(m.jsx)("span",{styles:{flex:1,flexDirection:"row"},children:Object(m.jsx)(v.a,{container:!0,direction:"row",style:{width:"35%"},children:Object(m.jsx)(v.a,{item:!0,xs:2,children:Object(m.jsx)(A.a,{style:{fontSize:"50px",backgroundColor:"white",textAlign:"justify"},onClick:function(){return function(e){console.log(P[e])}(t)},children:e})})})})}))})})]})})})}var F=[{name:"Luis",wellnessScore:10},{name:"Paul",wellnessScore:8},{name:"Pierre",wellnessScore:2},{name:"Drake",wellnessScore:5}],J=Object(s.a)((function(e){return{topBox:{paddingTop:"30px"},bottomBox:{marginBottom:"100px"},spacer:{padding:"10px"}}}));var z=function(){var e=J();return Object(m.jsxs)("div",{className:"container",styles:e.root,children:[Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsx)(g.a,{className:e.topBox}),Object(m.jsxs)(v.a,{container:!0,direction:"column",spacing:1,alignItems:"center",styles:e.container,children:[Object(m.jsx)(U,{}),Object(m.jsx)(g.a,{className:e.spacer}),Object(m.jsx)("div",{children:F.map((function(e){return Object(m.jsx)("span",{styles:{flex:1,flexDirection:"row"},children:Object(m.jsx)(v.a,{container:!0,justify:"center",spacing:5,children:Object(m.jsx)(v.a,{item:!0,xs:12,sm:12,children:Object(m.jsx)(O,{})})})})}))})]})]}),Object(m.jsx)(g.a,{className:e.bottomBox}),Object(m.jsx)(L,{})]})},E=n(86),M=(n(161),n(46)),H=n(125);var W=function(){var e=Object(r.useState)(""),t=Object(y.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(y.a)(a,2),s=o[0],i=o[1];return Object(m.jsxs)("div",{class:"login-page",children:[Object(m.jsx)("p",{class:"login-message",children:"Feel Reached."}),Object(m.jsx)("div",{class:"login",children:Object(m.jsxs)(M.a,{onSubmit:function(e){e.preventDefault()},children:[Object(m.jsx)(M.a.Group,{controlId:"name",children:Object(m.jsx)(M.a.Control,{type:"name",placeholder:"Name",value:s,onChange:function(e){return i(e.target.value)}})}),Object(m.jsx)(M.a.Group,{controlId:"email",children:Object(m.jsx)(M.a.Control,{type:"email",placeholder:"Email",value:n,onChange:function(e){return c(e.target.value)}})}),Object(m.jsx)(b.b,{to:function(e){return Object(E.a)(Object(E.a)({},e),{},{pathname:"/feed"})},children:Object(m.jsx)(H.a,{block:!0,size:"lg",type:"submit",onClick:function(){return function(){var e=JSON.stringify({Document:{name:s,email:n},collection:"Users",database:"MongoDB"});fetch("http://localhost:5001/mongodb",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type"},body:e}),localStorage.setItem("name",s),localStorage.setItem("email",n)}()},disabled:!(n.length>0&&s.length>0),children:"Join"})})]})})]})},G=(n(96),n(238)),Y=n(235),q=n(121),K=n.n(q);var Q=function(){var e=Object(r.useState)(""),t=Object(y.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),s=Object(y.a)(o,2),i=s[0],l=s[1],d=function(e,t){"clickaway"!==t&&l(!1)};return Object(m.jsxs)("div",{class:"profile",children:[Object(m.jsxs)("div",{class:"profile-header",children:[Object(m.jsx)("img",{src:"/images/profile-icon.png"}),Object(m.jsx)("p",{class:"username",children:localStorage.getItem("name")})]}),Object(m.jsxs)("div",{class:"settings",children:[Object(m.jsxs)("form",{onSubmit:function(){l(!0)},children:[Object(m.jsxs)("label",{children:["Invite friends!",Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){a(e.target.value)}})]}),Object(m.jsx)("input",{type:"submit",value:"Invite"})]}),Object(m.jsx)("p",{children:"Account Security"}),Object(m.jsx)("p",{children:"Notification Settings"}),Object(m.jsx)("p",{children:"Wellness Tips"}),Object(m.jsx)("p",{children:"Sign Out"}),Object(m.jsx)(G.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:i,autoHideDuration:6e3,onClose:d,message:"Note archived",action:Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(u.a,{color:"secondary",size:"small",onClick:d,children:"UNDO"}),Object(m.jsx)(Y.a,{size:"small","aria-label":"close",color:"inherit",onClick:d,children:Object(m.jsx)(K.a,{fontSize:"small"})})]})})]}),Object(m.jsx)(L,{})]})},X=n(236),Z=[{sender:"bob",message:"You are the greatest!"},{sender:"jesus",message:"you can do anything you set your mind to!"},{sender:"sarah",message:"go team!"}],$=Object(s.a)((function(){return{root:{display:"flex",alignItems:"flex-start",padding:"2vh"},topBox:{paddingTop:"30px"},bottomBox:{marginBottom:"100px"},actions:{display:"flex",flexDirection:"column"}}}));var _=function(){var e=$();return Object(m.jsxs)("div",{children:[Object(m.jsx)(g.a,{className:e.topBox}),Object(m.jsx)(v.a,{container:!0,direction:"column",spacing:2,alignItems:"center",styles:e.container,children:Z.map((function(e){return Object(m.jsx)(v.a,{item:!0,xs:6,sm:6,children:Object(m.jsx)(i.a,{children:Object(m.jsxs)(V.a,{children:[Object(m.jsx)(X.a,{component:"h3",variant:"h3",children:e.message}),Object(m.jsxs)(X.a,{component:"h5",variant:"h5",children:["--",e.sender]})]})})})}))}),Object(m.jsx)(g.a,{className:e.bottomBox}),Object(m.jsx)(L,{})]})},ee=n(14),te=n(122),ne=n.n(te),re=function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),c=Object(r.useRef)(),a=Object(r.useRef)(),o=Object(r.useRef)(),s=Object(r.useRef)();function i(e){var t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]});return t.onicecandidate=d,t.ontrack=f,t.onnegotiationneeded=function(){return function(e){c.current.createOffer().then((function(e){return c.current.setLocalDescription(e)})).then((function(){var t={target:e,caller:a.current.id,sdp:c.current.localDescription};a.current.emit("offer",t)})).catch((function(e){return console.log(e)}))}(e)},t}function l(e){console.log("we in handlereceivecall"),c.current=i();var t=new RTCSessionDescription(e.sdp);c.current.setRemoteDescription(t).then((function(){s.current.getTracks().forEach((function(e){return c.current.addTrack(e,s.current)}))})).then((function(){return c.current.createAnswer()})).then((function(e){return c.current.setLocalDescription(e)})).then((function(){var t={target:e.caller,caller:a.current.id,sdp:c.current.localDescription};a.current.emit("answer",t)}))}function u(e){var t=new RTCSessionDescription(e.sdp);c.current.setRemoteDescription(t).catch((function(e){return console.log(e)}))}function d(e){if(e.candidate){var t={target:o.current,candidate:e.candidate};a.current.emit("ice-candidate",t)}}function j(e){var t=new RTCIceCandidate(e);c.current.addIceCandidate(t).catch((function(e){return console.log(e)}))}function f(e){n.current.srcObject=e.streams[0]}return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(n){t.current.srcObject=n,s.current=n,a.current=ne.a.connect("/video"),a.current.emit("join room",e.match.params.roomID),a.current.on("other user",(function(e){!function(e){c.current=i(e),s.current.getTracks().forEach((function(e){return c.current.addTrack(e,s.current)}))}(e),o.current=e})),console.log("WE OUT HERE IN ROOM.JS"),a.current.on("user joined",(function(e){o.current=e})),a.current.on("offer",l),a.current.on("answer",u),a.current.on("ice-candidate",j)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("video",{autoPlay:!0,ref:t}),Object(m.jsx)("video",{autoPlay:!0,ref:n})]})},ce=(n(239),n(12)),ae=n.n(ce),oe=n(19),se=n(64),ie=n(65),le=n(67),ue=n(66),de=function(){var e=Object(oe.a)(ae.a.mark((function e(t,n,r,c,a,o){var s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.addStream(n),e.next=4,t.createOffer();case 4:return s=e.sent,e.next=7,t.setLocalDescription(s);case 7:c(r,s,a,o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r,c,a,o){return e.apply(this,arguments)}}(),je=function(){var e=Object(oe.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(oe.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new RTCPeerConnection({iceServers:[{urls:"stun:stun2.1.google.com:19302"}]}),e.abrupt("return",t);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),pe=function(e,t,n,r,c,a){e.onicecandidate=function(e){e.candidate&&a(n,e.candidate,r,t)},e.ontrack=function(e){c.srcObject!==e.streams[0]&&(c.srcObject=e.streams[0])}},be=function(){var e=Object(oe.a)(ae.a.mark((function e(t,n,r,c,a,o){var s,i;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.addStream(n),s=JSON.parse(r.offer),t.setRemoteDescription(s),e.next=6,t.createAnswer();case 6:i=e.sent,t.setLocalDescription(i),c(r.from,i,a,o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r,c,a,o){return e.apply(this,arguments)}}(),me=(n(193),n(112),function(){var e=Object(oe.a)(ae.a.mark((function e(t,n,r,c){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ref("/notifs/"+t).set({type:"offer",from:c,offer:JSON.stringify(n)});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}()),he=function(){var e=Object(oe.a)(ae.a.mark((function e(t,n,r,c){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ref("/notifs/"+t).update({type:"answer",from:c,answer:JSON.stringify(n)});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),xe=function(){var e=Object(oe.a)(ae.a.mark((function e(t,n,r,c){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ref("/notifs/"+t).update({type:"candidate",from:c,candidate:JSON.stringify(n)});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),Oe=(n(197),n(10)),ve=n.n(Oe),ge=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var r;return Object(se.a)(this,n),(r=t.call(this,e)).onLoginClicked=Object(oe.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.onLogin(r.state.username);case 2:r.setState({isLoggedIn:!0});case 3:case"end":return e.stop()}}),e)}))),r.onStartCallClicked=function(){r.props.startCall(r.state.username,r.state.userToCall)},r.renderVideos=function(){return Object(m.jsxs)("div",{className:ve()("videos",{active:r.state.isLoggedIn}),children:[Object(m.jsxs)("div",{styles:{maxWidth:"100px"},children:[Object(m.jsx)("label",{children:r.state.username}),Object(m.jsx)("video",{ref:r.props.setLocalVideoRef,autoPlay:!0,playsInline:!0})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:r.props.connectedUser}),Object(m.jsx)("video",{ref:r.props.setRemoteVideoRef,autoPlay:!0,playsInline:!0})]})]})},r.renderForms=function(){return Object(m.jsxs)("div",{className:"form",children:[Object(m.jsx)("label",{children:"Call to"}),Object(m.jsx)("input",{value:r.state.userToCall,type:"text",onChange:function(e){return r.setState({userToCall:e.target.value})}}),Object(m.jsx)("button",{onClick:r.onStartCallClicked,id:"call-btn",className:"btn btn-primary",children:"Call"})]},"a")},r.state={isLoggedIn:!0,userToCall:null,username:null},r}return Object(ie.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("section",{id:"container",children:[Object(m.jsxs)("div",{className:"form",children:[Object(m.jsx)("label",{children:"Call to"}),Object(m.jsx)("input",{value:this.state.userToCall,type:"text",onChange:function(t){return e.setState({userToCall:t.target.value})}}),Object(m.jsx)("button",{onClick:this.onStartCallClicked,id:"call-btn",className:"btn btn-primary",children:"Call"})]},"a"),this.renderVideos()]})}}]),n}(c.a.Component),ye=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var r;return Object(se.a)(this,n),(r=t.call(this,e)).componentDidMount=Object(oe.a)(ae.a.mark((function e(){var t,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:return t=e.sent,r.localVideoRef.srcObject=t,e.next=6,fe();case 6:n=e.sent,r.setState({localStream:t,localConnection:n});case 8:case"end":return e.stop()}}),e)}))),r.startCall=function(){var e=Object(oe.a)(ae.a.mark((function e(t,n){var c,a,o,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=r.state,a=c.localConnection,o=c.database,s=c.localStream,pe(a,t,n,o,r.remoteVideoRef,xe),de(a,s,n,me,o,t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.setLocalVideoRef=function(e){r.localVideoRef=e},r.setRemoteVideoRef=function(e){r.remoteVideoRef=e},r.handleUpdate=function(e,t){var n=r.state,c=n.localConnection,a=n.database,o=n.localStream;if(e)switch(e.type){case"offer":r.setState({connectedUser:e.from}),pe(c,t,e.from,a,r.remoteVideoRef,xe),be(c,o,e,he,a,t);break;case"answer":r.setState({connectedUser:e.from}),function(e,t){var n=JSON.parse(t.answer);e.setRemoteDescription(n)}(c,e);break;case"candidate":!function(e,t){var n=JSON.parse(t.candidate);e.addIceCandidate(new RTCIceCandidate(n))}(c,e)}},r.state={database:null,connectedUser:null,localStream:null,localConnection:null},r.localVideoRef=c.a.createRef(),r.remoteVideoRef=c.a.createRef(),r}return Object(ie.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{styles:{display:"flex",maxWidth:"50px"},children:[Object(m.jsx)(ge,{startCall:this.startCall,onLogin:this.onLogin,setLocalVideoRef:this.setLocalVideoRef,setRemoteVideoRef:this.setRemoteVideoRef,connectedUser:this.state.connectedUser}),Object(m.jsx)(L,{})]})}}]),n}(c.a.Component);var Ce=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("header",{className:"App-header",children:Object(m.jsx)(b.a,{children:Object(m.jsxs)(ee.c,{children:[Object(m.jsx)(ee.a,{path:"/video",component:ye}),Object(m.jsx)(ee.a,{path:"/room/:roomID",component:re}),Object(m.jsx)(ee.a,{path:"/",exact:!0,component:W}),Object(m.jsx)(ee.a,{path:"/feed",component:z}),Object(m.jsx)(ee.a,{path:"/profile",component:Q}),Object(m.jsx)(ee.a,{path:"/messages",component:_})]})})})})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,242)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(Ce,{})}),document.getElementById("root")),we()},74:function(e,t,n){},96:function(e,t,n){}},[[196,1,2]]]);
//# sourceMappingURL=main.40ea2db4.chunk.js.map